<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Riwayat Laporan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/dokter.css">
</head>
<body>

<nav class="navbar navbar-dark bg-primary mb-4">
    <div class="container">
        <span class="navbar-brand">Hospital App - Riwayat</span>
        <span class="text-white" th:text="'Halo, ' + ${doctorName}"></span>
    </div>
</nav>

<div class="container">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <a href="/doctor/menu" class="btn btn-outline-secondary">‚Üê Kembali ke Menu</a>
        
        <a href="/doctor/diagnosa-manual" class="btn btn-primary">
            + Buat Laporan Baru
        </a>
    </div>

    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            Daftar Riwayat Diagnosa 
        </div>

        <div class="card-body">
            <div class="table-responsive">
<table class="table table-hover table-striped align-middle mb-0">
    <thead class="table-primary text-nowrap">
        <tr>
            <th class="py-3 px-3">Tanggal</th>
            <th class="py-3">Nama Pasien</th>
            <th class="py-3">Info Pasien</th> 
            <th class="py-3">Diagnosa</th>
            <th class="py-3">Catatan</th>
            <th class="py-3 text-center">Aksi</th> </tr>
    </thead>
    <tbody>
        <tr th:each="diag : ${diagnoses}">
            <td class="px-3 fw-bold text-secondary" th:text="${diag.date}"></td>
            <td>
                <span class="fw-bold" th:text="${diag.patientName}"></span>
                <span th:if="${diag.appointmentId == 0}" class="badge bg-warning text-dark ms-1" style="font-size: 0.7em;">Manual</span>
            </td>
            <td>
                <div style="font-size: 0.9em;"><span th:text="${diag.gender}"></span></div>
                <small class="text-muted" th:text="${diag.patientAge} + ' Tahun'"></small>
            </td>
            <td>
                <span class="badge bg-danger bg-opacity-10 text-danger px-2 py-1" th:text="${diag.diagnosis}"></span>
            </td>
            <td class="text-muted small" style="max-width: 250px;">
                <i class="bi bi-prescription"></i> <span th:text="${diag.prescription}"></span>
            </td>
            
            <td class="text-center">
                <form action="/doctor/delete-diagnosis" method="post" 
                      onsubmit="return confirm('Yakin ingin menghapus data ini?');">
                    <input type="hidden" name="id" th:value="${diag.id}">
                    <button type="submit" class="btn btn-danger btn-sm" title="Hapus Data">
                        üóëÔ∏è
                    </button>
                </form>
            </td>
        </tr>

        <tr th:if="${#lists.isEmpty(diagnoses)}">
            <td colspan="6" class="text-center py-5 text-muted">
                <i class="bi bi-folder2-open display-4 d-block mb-3"></i>
                Belum ada riwayat pemeriksaan.
            </td>
        </tr>
    </tbody>
</table>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>